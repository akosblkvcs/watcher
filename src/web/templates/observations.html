{% extends "base.html" %}

{% block title %}Observations - Watcher{% endblock %}

{% block content %}
    <h1>Recent Observations</h1>

    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Run</th>
                <th>Target</th>
                <th>Observed At</th>
                <th>Changed</th>
                <th>Previous</th>
                <th>Processed</th>
                <th>Error</th>
                <th>Duration (ms)</th>
            </tr>
        </thead>
        <tbody>
            {% for o in observations %}
            <tr>
                <td>{{ o.id }}</td>
                <td>{{ o.run_id }}</td>
                <td>{{ o.target_id }}</td>
                <td>{{ o.observed_at }}</td>
                <td>{{ 'yes' if o.changed else 'no' }}</td>
                <td>
                    {% if o.previous_processed_text %}
                    <code>{{ o.previous_processed_text }}</code>
                    {% endif %}
                </td>
                <td>
                    {% if o.processed_text %}
                    <code>{{ o.processed_text }}</code>
                    {% endif %}
                </td>
                <td>
                    {% if o.error_message %}
                    <code>{{ o.error_message }}</code>
                    {% endif %}
                </td>
                <td>{{ o.duration_ms if o.duration_ms else '' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
